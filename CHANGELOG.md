## [1.3.1+171] - 2026-02-14

### UI/UX 改进
- **流畅动效升级**：为页面切换与子导航标签切换引入垂直滑动位移（Vertical Slide）与淡入淡出组合动画，消除原本的瞬切感。
- **动态侧边栏**：为侧边导航栏的二级菜单添加 `AnimatedSize` 展开/折叠动画，提升层级交互的连贯性。
- **导航角色重定义**：将侧边栏用户头部正式转化为导航项，点击直接跳转个人主页，右侧新增下拉箭头用于唤起功能菜单。
- **高亮逻辑优化**：处于个人资料页面时，头像区域将保持高亮，同时下方所有根导航项（如 Misskey）将强制熄灭，逻辑更清晰。
- **菜单精简**：移除了用户菜单中冗余的“用户页面”按钮，统一通过头像直达。

### Flarum 调整
- **移除微信登录逻辑**：删除了所有关于 Flarum "微信登录" 的 API、UI 以及相关的硬编码配置，以保持核心代码的纯净性（Flarum 三方登录应作为插件可选集成）。

### 实时性与网络强化
- **前台自动同步**：集成应用生命周期监听，当应用从后台恢复至前台时，自动触发 Misskey 串流重连并刷新通知列表。
- **带状态重连机制**：优化了 `MisskeyStreamingService`，重连后可自动恢复断开前的所有时间线订阅，确保数据流不中断。
- **Flarum 动态监测**：在论坛页面引入实时端点校验，当绑定的 Endpoint 在设置中被移除时，页面将立即感知并回退至“未连接”状态。
- **智能预加载**：进入 Misskey 或 Flarum 页面及切换子标签时，自动触发数据有效性检测与静默刷新。

### 系统功能与修复
- **重置此应用**：在存储设置中新增“危险区域”及“重置此应用”功能，支持一键清空 `SharedPreferences`、`SecureStorage` 及所有磁盘缓存，恢复应用初始状态。
- **辅助功能修复**：修复了 Windows 平台因动画过程中旧组件未及时退出语义树导致的 `AXTree` 更新错误。
- **合并冲突解决**：手动修复了因组织更新导致的 `ResponsiveShell` 等核心组件的代码重复与逻辑冲突。
- **代码质量维护**：完成了全量 `build_runner` 生成代码更新，处理了所有异步 Context 使用及弃用 API 的 Lint 警告。

## [1.3.0] - 2026-2-14

### UI/UX 改进
- **在线人数显示优化**：将原本占据空间的文本替换为精致的动画脉冲图标与数字，点击可弹出 Material 3 风格的详细统计卡片。
- **全局字体系统升级**：引入 `SauceTypography` 自适应字型配置，针对 Android 平台进行 0.94x 缩放优化，并根据 M3 标准设定精确字重。
- **高密度信息展示**：个人资料页面的简介显示上限提升至 10 行，超出部分支持通过点击浮动卡片查看完整内容。
- **导航头部精简**：侧边栏顶部展示重构为单行模式，仅保留头像与昵称；未登录时采用 Material 设计默认头像并显示“无账户”状态。
- **极速启动体验**：禁用了应用各主要页面的入场动画，并将启动时的加载指示器替换为静态组件，大幅缩短首屏感官时间。

### 导航系统重构
- **层级化侧边导航**：重构了 `ResponsiveShell` 架构，移动端全面采用侧边抽屉（Drawer）作为主导航，桌面端则使用自适应侧边栏（Rail）。
- **根/子导航整合**：实现了在一个侧边栏中同时管理“根平台”（Misskey、Flarum 等）与“子功能”（时间线、讨论列表等）的层级化交互。
- **全局导航控制器**：引入 `NavigationController` 与全局 `GlobalKey`，解决了移动端嵌套 Scaffold 导致无法唤起侧边栏的问题。

### Flarum 增强
- **Endpoint 登录正式上线**：支持在无 Flarum 账户的情况下，通过输入实例 URL 直接进入论坛，享受“无账户、更安全”的阅读模式。
- **节点管理页面**：在开发者设置中新增“Flarum 端点”管理功能，支持多实例的快速添加、切换与删除。
- **只读模式适配**：为 Endpoint 模式下的用户自动禁用发帖与回复功能，确保合规的访客体验。

### 日志系统优化
- **统一路径管理**：重构了 `AppLogger` 的目录逻辑，彻底解决之前无法读取最新日志及历史记录的路径冲突问题。
- **彩色日志查看器**：日志展示页面新增按级别着色功能（如 Error 标记为红色），并支持一键复制完整日志到剪贴板。
- **导出路径优化**：Android 平台的手动导出路径调整至公共 `Download/CyaniTalk Logs` 目录，方便用户查找。

### 修复
- 修复了 iOS 端音频引擎因 AVAudioSession 配置冲突导致的初始化崩溃。
- 修复了 `ModernNoteCard` 在窄屏设备上的 `RenderFlex` 布局溢出错误。
- 修复了 `MisskeyChannelsPage` 在特定分辨率下的内容重叠问题。
- 适配了 Flutter 最新版本的 `withValues` 与 `TextDirection` API 变动。
